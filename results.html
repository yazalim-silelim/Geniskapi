<!DOCTYPE html>
<html lang="tr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
	<title>Sonuçlar</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		:root { --primary: #10B981; --bg: #fafafa; --fg: #111; }
		@media (prefers-color-scheme: dark) { :root { --bg: #0b0b0d; --fg: #eee; } }
		* { box-sizing: border-box; }
		body { margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); color: var(--fg); min-height: 100vh; }
		header { position: sticky; top: 0; z-index: 10; display: flex; gap: .5rem; align-items: center; padding: .75rem 1rem; background: rgba(255,255,255,.6); backdrop-filter: blur(8px); border-bottom: 1px solid rgba(0,0,0,.08); }
		@media (prefers-color-scheme: dark) { header { background: rgba(0,0,0,.5); border-bottom-color: rgba(255,255,255,.12); } }
		input[type="search"] { flex: 1; padding: .6rem .8rem; border-radius: 999px; border: 1px solid rgba(0,0,0,.15); outline: none; }
		.tabs { display: flex; gap: .5rem; padding: .5rem 1rem; overflow-x: auto; }
		.tab { padding: .5rem .75rem; border-radius: 999px; border: 1px solid rgba(0,0,0,.08); background: rgba(255,255,255,.7); cursor: pointer; white-space: nowrap; }
		.tab.active { background: var(--primary); color: white; border-color: transparent; }
		@media (prefers-color-scheme: dark) { .tab { background: rgba(0,0,0,.5); border-color: rgba(255,255,255,.12);} }
		.results { max-width: 900px; margin: .25rem auto 4rem auto; padding: 0 1rem; display: grid; gap: .75rem; }
		.card { padding: .9rem 1rem; border-radius: 14px; border: 1px solid rgba(0,0,0,.08); background: rgba(255,255,255,.7); }
		.card h3 { margin: 0 0 .25rem; font-size: 1rem; }
		.card p { margin: 0; opacity: .85; font-size: .9rem; }
		.skeleton { position: relative; overflow: hidden; }
		.skeleton * { opacity: 0; }
		@keyframes shimmer { 0%{ background-position:-200% 0;} 100%{ background-position:200% 0;} }
		.skeleton::after { content: ""; position: absolute; inset: 0; border-radius: inherit; background: linear-gradient(90deg, rgba(0,0,0,.04), rgba(0,0,0,.08), rgba(0,0,0,.04)); background-size:200% 100%; animation: shimmer 1.4s infinite; }
		@media (prefers-color-scheme: dark) { .card { background: rgba(0,0,0,.5); border-color: rgba(255,255,255,.12);} .skeleton::after { background: linear-gradient(90deg, rgba(255,255,255,.04), rgba(255,255,255,.08), rgba(255,255,255,.04)); } }
		.badge { display:inline-flex; align-items:center; gap:.4rem; padding:.2rem .5rem; border-radius:999px; font-size:.7rem; background: rgba(16,185,129,.12); color:#03624d; }
		/* Image grid */
		.grid { display:grid; grid-template-columns: repeat(2, 1fr); gap:6px; }
		@media (min-width:640px){ .grid { grid-template-columns: repeat(3, 1fr);} }
		@media (min-width:900px){ .grid { grid-template-columns: repeat(4, 1fr);} }
		.thumb { position: relative; overflow: hidden; border-radius: 12px; background: rgba(0,0,0,.06); }
		.thumb img { width: 100%; height: 100%; object-fit: cover; display: block; transform: scale(1.02); transition: transform .3s ease; }
		.thumb:hover img { transform: scale(1.06); }
		/* Lightbox */
		.lightbox { position: fixed; inset:0; display: none; align-items:center; justify-content:center; background: rgba(0,0,0,.75); z-index: 50; }
		.lightbox.open { display: flex; }
		.lightbox img { max-width: 92vw; max-height: 90vh; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,.5); }
		.lightbox .close { position: absolute; top: 1rem; right: 1rem; color: white; font-size: 1.5rem; cursor: pointer; }
		/* Video overlay */
		.play { position: absolute; inset:auto auto 8px 8px; background: rgba(0,0,0,.6); color: white; padding: 4px 8px; border-radius: 999px; font-size: .75rem; display: none; }
		.thumb.video:hover .play { display: inline-flex; align-items:center; gap:6px; }
		/* Back to top */
		.top { position: fixed; right: 1rem; bottom: 1rem; z-index: 60; width: 44px; height: 44px; border-radius: 999px; display: grid; place-items: center; background: var(--primary); color: white; border: none; box-shadow: 0 10px 20px rgba(0,0,0,.2); opacity:0; transform: translateY(8px); transition: .2s ease; }
		.top.show { opacity:1; transform: translateY(0); }
	</style>
</head>
<body>
	<header>
		<a href="/index.html" aria-label="Ana sayfa"><i class="fas fa-door-open"></i></a>
		<input id="q" type="search" placeholder="Ara..." />
		<span id="meta"></span>
	</header>
	<nav class="tabs" id="tabs" aria-label="Sekmeler">
		<button class="tab active" data-tab="news"><i class="fas fa-newspaper"></i> Haberler</button>
		<button class="tab" data-tab="images"><i class="fas fa-image"></i> Görseller</button>
		<button class="tab" data-tab="videos"><i class="fas fa-video"></i> Videolar</button>
		<button class="tab" data-tab="maps"><i class="fas fa-map-marked-alt"></i> Haritalar</button>
	</nav>
	<main class="results" id="results"></main>
	<div id="sentinel"></div>
	<button class="top" id="toTop" aria-label="Yukarı dön"><i class="fas fa-arrow-up"></i></button>
	<div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
		<i class="fas fa-times close" id="lbClose" aria-label="Kapat"></i>
		<img id="lbImg" alt="" />
	</div>
	<script>
		const params = new URLSearchParams(location.search);
		const q = params.get('q') || '';
		document.getElementById('q').value = q;
		const meta = document.getElementById('meta');
		const results = document.getElementById('results');
		const tabs = document.getElementById('tabs');
		const sentinel = document.getElementById('sentinel');
		const toTop = document.getElementById('toTop');
		const lb = document.getElementById('lightbox');
		const lbImg = document.getElementById('lbImg');
		const lbClose = document.getElementById('lbClose');
		let activeTab = 'news';
		let page = 0;
		function setActive(tab){
			activeTab = tab; page = 0;
			[...tabs.children].forEach(btn=>btn.classList.toggle('active', btn.dataset.tab===tab));
		}
		function makeSkeleton(n=6){
			const containerNeeded = activeTab==='images';
			if(page===0){ results.innerHTML=''; }
			const parent = containerNeeded ? (page===0 ? (()=>{ const g=document.createElement('div'); g.className='grid'; results.appendChild(g); return g; })() : results.querySelector('.grid')) : results;
			for(let i=0;i<n;i++){
				const c = document.createElement(containerNeeded ? 'div':'div');
				c.className = containerNeeded ? 'thumb skeleton' : 'card skeleton';
				if(containerNeeded) c.style.aspectRatio = (Math.random()*0.6 + 0.7).toFixed(2);
				else c.innerHTML = '<h3>_____</h3><p>__________</p>';
				parent.appendChild(c);
			}
		}
		const fake = {
			news: (query,p)=> Array.from({length:6}).map((_,i)=>({title:`${query} Haber ${(p*6)+i+1}`, desc:`Güncel gelişmeler.`, url:'https://news.google.com'})),
			images: (query,p)=> Array.from({length:12}).map((_,i)=>({src:`https://picsum.photos/seed/${encodeURIComponent(query)}-${p}-${i}/600/400`, alt:`${query} Görsel ${(p*12)+i+1}`})),
			videos: (query,p)=> Array.from({length:6}).map((_,i)=>({title:`${query} Video ${(p*6)+i+1}`, url:'https://www.youtube.com', thumb:`https://picsum.photos/seed/${encodeURIComponent(query)}-v${p}-${i}/480/270`})),
			maps: (query,p)=> Array.from({length:3}).map((_,i)=>({title:`${query} Konum ${(p*3)+i+1}`, desc:'Haritalarda ara', url:'https://www.google.com/maps'}))
		};
		function append(items){
			if(activeTab==='images'){
				let grid = results.querySelector('.grid');
				if(!grid){ grid=document.createElement('div'); grid.className='grid'; results.appendChild(grid); }
				items.forEach(({src,alt})=>{
					const t = document.createElement('div'); t.className = 'thumb';
					const img = document.createElement('img'); img.loading = 'lazy'; img.src = src; img.alt = alt; img.decoding = 'async';
					img.addEventListener('click', ()=>{ lb.classList.add('open'); lbImg.src = src; lbImg.alt = alt; });
					t.appendChild(img); grid.appendChild(t);
				});
				return;
			}
			if(activeTab==='videos'){
				items.forEach(({title,url,thumb})=>{
					const t = document.createElement('div'); t.className = 'thumb video';
					const img = document.createElement('img'); img.loading = 'lazy'; img.src = thumb; img.alt = title; img.decoding = 'async';
					const tag = document.createElement('div'); tag.className = 'play'; tag.innerHTML = '<i class="fas fa-play"></i> İzle';
					t.appendChild(img); t.appendChild(tag); t.addEventListener('click', ()=>window.open(url,'_blank'));
					results.appendChild(t);
				});
				return;
			}
			items.forEach(({title,desc,url})=>{
				const c = document.createElement('div'); c.className = 'card';
				c.innerHTML = `<h3><a href="${url}" target="_blank">${title}</a></h3>${desc?`<p>${desc}</p>`:''}`;
				results.appendChild(c);
			});
		}
		async function loadMore(){
			makeSkeleton(activeTab==='images'?12:activeTab==='videos'?6:6);
			await new Promise(r=>setTimeout(r, 600));
			append(fake[activeTab](q,page));
			page++;
		}
		async function run(){
			if(!q){ meta.textContent = ''; results.innerHTML = ''; return; }
			meta.innerHTML = `<span class="badge"><i class=\"fas fa-tag\"></i> ${q}</span>`;
			page = 0;
			results.innerHTML='';
			await loadMore();
		}
		document.getElementById('q').addEventListener('keypress', (e)=>{ if(e.key==='Enter'){ location.href = '/results.html?q=' + encodeURIComponent(e.target.value.trim()); }});
		tabs.addEventListener('click', (e)=>{
			const btn = e.target.closest('.tab');
			if(!btn) return;
			setActive(btn.dataset.tab);
			run();
		});
		const io = new IntersectionObserver((entries)=>{
			if(entries.some(e=>e.isIntersecting)) loadMore();
		});
		io.observe(sentinel);
		window.addEventListener('scroll', ()=>{ toTop.classList.toggle('show', window.scrollY>300); }, {passive:true});
		toTop.addEventListener('click', ()=>window.scrollTo({top:0, behavior:'smooth'}));
		lbClose.addEventListener('click', ()=> lb.classList.remove('open'));
		lb.addEventListener('click', (e)=>{ if(e.target===lb) lb.classList.remove('open'); });
		setActive('news');
		run();
	</script>
</body>
</html>